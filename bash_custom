umask 002
export EDITOR="/usr/bin/emacs -nw"

export PIP_DOWNLOAD_CACHE=~/.pip/cache

PYCOMPLETION=`which pycompletion 2>/dev/null`
if [ -n "$PYCOMPLETION" ]; then
  . $PYCOMPLETION
fi

VENVWRAPPER=`which virtualenvwrapper.sh 2>/dev/null`
if [ -n "$VENVWRAPPER" ]; then
  export WORKON_HOME=$HOME/.venvs
  export PROJECT_HOME=$HOME/projects
  source $VENVWRAPPER
fi

mktags() {
    PWD=`pwd`
    SP=`virtualenvwrapper_get_site_packages_dir`
    find $PWD $SP -name '*.py' | etags -
}

source ~/dot/bash_prompt
source ~/dot/bash_aliases

eval `dircolors ~/dot/dircolors`

export HISTCONTROL=ignoreboth
export HISTSIZE=100000
export HISTFILESIZE=100000

export PATH=$HOME/dot/bin:$PATH

# Grab the ssh-agent variables from the current session and write them to
# ~/.sshvars as a persistent store, for sourcing from within screen/tmux
SSHVARS="SSH_CLIENT SSH_TTY SSH_AUTH_SOCK SSH_CONNECTION"

for x in ${SSHVARS} ; do
    (eval echo $x=\$$x) | sed 's/=/="/
s/$/"/
s/^/export /'
done 1>$HOME/.sshvars
chmod 600 $HOME/.sshvars
